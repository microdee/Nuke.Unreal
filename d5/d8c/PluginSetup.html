<!-- HTML header for doxygen 1.13.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=11"/>
  <meta name="generator" content="Doxygen 1.12.0"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Nuke.Unreal: Setting up for plugin development</title>
  <link rel="icon" href="../../nu.icon.onDark.fill.svg" type="image/x-icon" />
  <link href="../../tabs.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="../../jquery.js"></script>
  <script type="text/javascript" src="../../dynsections.js"></script>
  <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
  <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
  <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
  <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
  <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
  <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
  <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
  <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
  <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
  <script type="text/javascript">
      DoxygenAwesomeDarkModeToggle.init()
      DoxygenAwesomeParagraphLink.init()
      DoxygenAwesomeInteractiveToc.init()
      DoxygenAwesomeTabs.init()
      DoxygenAwesomeFragmentCopyButton.init()
  </script>
</head>
<body>
    <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
      <div id="titlearea">
        <table cellspacing="0" cellpadding="0">
          <tbody>
            <tr id="projectrow">
              <td id="projectlogo"><img alt="Logo" src="../../nu.icon.onDark.fill.55h.png"/></td>
              <td id="projectalign">
                <div id="projectname">Nuke.Unreal
                </div>
                <div id="projectbrief">Build Unreal apps in Style.</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d5/d8c/PluginSetup.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Setting up for plugin development</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_Manual_2PluginSetup"></a></p>
<p>A little bit of theory: Unreal plugins are simple on the surface but easily can get very complicated to handle especially when they need to interact with the non-unreal world. For this reason it is recommended to break up development and distribution of Unreal plugins into multiple stages:</p>
<div align="center"></div><div align="center"><div class="image">
<object type="image/svg+xml" data="../../PluginStages.drawio.svg" style="pointer-events: none;"></object>
</div>
    </div><div align="center"></div><p><a class="el" href="../../d0/d55/namespaceNuke_1_1Unreal.html">Nuke.Unreal</a> lives in the "**True Plugin Source**" stage <em>(whatever that may look like in your software architecture)</em> and helps to deliver it to further distribution stages.</p>
<p>Plugins can be managed by creating your own targets to handle them. You can do that inside either your main build class, or glue that logic to your Unreal plugin in its folder structure via <a href="https://mcro.de/md.Nuke.Cola/de/d4b/BuildPlugins.html">Nuke.Cola build plugins</a>. The simplest method of which is <a href="https://mcro.de/md.Nuke.Cola/de/d4b/BuildPlugins.html#autotoc_md0">standalone <code>*.nuke.cs</code> files</a> which are compiled with the build project.</p>
<p>Let's have this scaffolding as an example:</p>
<div class="fragment"><div class="line">&lt;project root&gt;</div>
<div class="line">│   MyUnrealProject.uproject</div>
<div class="line">├── .nuke</div>
<div class="line">├── Content, Build, etc...</div>
<div class="line">├── Nuke.Targets</div>
<div class="line">│       Build.cs</div>
<div class="line">│       Nuke.Targets.csproj (main build script)</div>
<div class="line">└── Plugins</div>
<div class="line">    └── MyPlugin</div>
<div class="line">        │   MyPlugin.nuke.cs</div>
<div class="line">        ├── Source</div>
<div class="line">        │   └── MyModule</div>
<div class="line">        │       │   MyModule.nuke.cs</div>
<div class="line">        │       └── &lt;source files&gt;</div>
<div class="line">        └── &lt;regular plugin files&gt;</div>
</div><!-- fragment --><p>Build interfaces (or in <a class="el" href="../../df/da7/namespaceNuke.html">Nuke</a> vocabulary "[Build Components](https://nuke.build/docs/sharing/build-components/)") decorated with <code>[ImplicitBuildInterface]</code> inside these <code>*.nuke.cs</code> files will automatically contribute to the build graph without further boilerplate.</p>
<div class="fragment"><div class="line"><span class="comment">// MyModule.nuke.cs</span></div>
<div class="line"><span class="keyword">using </span>Nuke.Common;</div>
<div class="line"><span class="keyword">using </span>Nuke.Cola;</div>
<div class="line"><span class="keyword">using </span>Nuke.Cola.BuildPlugins;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="../../d0/d55/namespaceNuke_1_1Unreal.html">Nuke.Unreal</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span>Nuke.MyModule;</div>
<div class="line"> </div>
<div class="line">[ImplicitBuildInterface]</div>
<div class="line"><span class="keyword">public</span> <span class="keyword">interface </span>IMyModuleTargets : INukeBuild</div>
<div class="line">{</div>
<div class="line">    Target PrepareMyModule =&gt; _ =&gt; _</div>
<div class="line">        .Executes(() =&gt;</div>
<div class="line">        {</div>
<div class="line">            var <span class="keyword">self</span> = (<a class="code hl_class" href="../../da/d58/classNuke_1_1Unreal_1_1UnrealBuild.html">UnrealBuild</a>)<span class="keyword">this</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// This will automatically fetch the plugin which owns this particular script.</span></div>
<div class="line">            <span class="comment">// These plugin objects are shared among all targets and they can all manipulate their aspects</span></div>
<div class="line">            var thisPlugin = UnrealPlugin.Get(this.ScriptFolder());</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// This module has some runtime dependencies which it needs to sort out</span></div>
<div class="line">            <span class="comment">// This function gets the plugin in itself, no need to use thisPlugin here</span></div>
<div class="line">            <span class="comment">// See exact usage of this in section &quot;Semi-auto Runtime Dependencies&quot;</span></div>
<div class="line">            <span class="keyword">self</span>.PrepareRuntimeDependencies(this.ScriptFolder(), <span class="comment">/* ... */</span>);</div>
<div class="line">        });</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// MyPlugin.nuke.cs</span></div>
<div class="line"><span class="keyword">using </span>Nuke.Common;</div>
<div class="line"><span class="keyword">using </span>Nuke.Cola;</div>
<div class="line"><span class="keyword">using </span>Nuke.Cola.BuildPlugins;</div>
<div class="line"><span class="keyword">using </span><a class="code hl_namespace" href="../../d0/d55/namespaceNuke_1_1Unreal.html">Nuke.Unreal</a>;</div>
<div class="line"><span class="keyword">namespace </span>Nuke.MyPlugin;</div>
<div class="line"> </div>
<div class="line">[ImplicitBuildInterface]</div>
<div class="line"><span class="keyword">public</span> <span class="keyword">interface </span>IMyPluginTargets : INukeBuild</div>
<div class="line">{</div>
<div class="line">    Target PrepareMyPlugin =&gt; _ =&gt; _</div>
<div class="line">        .DependentFor&lt;<a class="code hl_class" href="../../da/d58/classNuke_1_1Unreal_1_1UnrealBuild.html">UnrealBuild</a>&gt;(u =&gt; u.Prepare)</div>
<div class="line">        .DependsOn&lt;IMyModuleTargets&gt;()</div>
<div class="line">        .Executes(() =&gt;</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// This will automatically fetch the plugin which owns this particular script.</span></div>
<div class="line">            <span class="comment">// These plugin objects are shared among all targets and they can all manipulate their aspects</span></div>
<div class="line">            var thisPlugin = UnrealPlugin.Get(this.ScriptFolder());</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Do extra logic scoped for the plugin...</span></div>
<div class="line">        });</div>
<div class="line">    </div>
<div class="line">    Target DistributeMyPlugin =&gt; _ =&gt; _</div>
<div class="line">        .DependsOn(PrepareMyPlugin)</div>
<div class="line">        .Executes(() =&gt;</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Create a copy of this plugin which can be distributed to other developers or other tools</span></div>
<div class="line">            <span class="comment">// who shouldn&#39;t require extra non-unreal related steps to work with it.</span></div>
<div class="line">            <span class="comment">// You can upload the result of this to Fab.</span></div>
<div class="line">            var (files, outputDir) = UnrealPlugin.Get(this.ScriptFolder()).DistributeSource();</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Do something with the affected files or in the output directory...</span></div>
<div class="line">        });</div>
<div class="line">    </div>
<div class="line">    Target BuildMyPlugin =&gt; _ =&gt; _</div>
<div class="line">        .DependsOn(PrepareMyPlugin)</div>
<div class="line">        .Executes(() =&gt;</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Build this plugin with UAT for binary distribution</span></div>
<div class="line">            var outputDir = UnrealPlugin.Get(this.ScriptFolder()).BuildPlugin();</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Do something in the output directory...</span></div>
<div class="line">        });</div>
<div class="line">}</div>
<div class="ttc" id="aclassNuke_1_1Unreal_1_1UnrealBuild_html"><div class="ttname"><a href="../../da/d58/classNuke_1_1Unreal_1_1UnrealBuild.html">Nuke.Unreal.UnrealBuild</a></div><div class="ttdoc">The main build class Unreal projects using Nuke.Unreal should inherit from. This class contains all b...</div><div class="ttdef"><b>Definition</b> <a href="../../db/d1e/UnrealBuild_8Templating_8cs_source.html#l00013">UnrealBuild.Templating.cs:14</a></div></div>
<div class="ttc" id="anamespaceNuke_1_1Unreal_html"><div class="ttname"><a href="../../d0/d55/namespaceNuke_1_1Unreal.html">Nuke.Unreal</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/d70/AndroidCookFlavor_8cs_source.html#l00007">AndroidCookFlavor.cs:8</a></div></div>
</div><!-- fragment --><p>And call them later with</p>
<div class="fragment"><div class="line">&gt; nuke prepare-my-plugin</div>
<div class="line">&gt; nuke distribute-my-plugin</div>
<div class="line">&gt; nuke build-my-plugin</div>
</div><!-- fragment --><p>You have absolute freedom to organize the task-dependency graph around handling your plugins. For example one target may manipulate multiple plugins even, from a dynamic set of folders. The above example is just a simple use-case. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
